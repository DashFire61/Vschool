{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Aspen Young\\\\OneDrive\\\\Documents\\\\Assignments\\\\personal projects\\\\personal project\\\\solo\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"C:\\\\Users\\\\Aspen Young\\\\OneDrive\\\\Documents\\\\Assignments\\\\personal projects\\\\personal project\\\\solo\\\\client\\\\src\\\\context\\\\userProvider.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nconst UserContext = React.createContext();\nconst userAxios = axios.create();\nuserAxios.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\");\n  config.headers.Authorization = \"Bearer \".concat(token);\n  return config;\n});\n\nclass UserProvider extends Component {\n  constructor() {\n    super();\n\n    this.signup = credentials => {\n      axios.post(\"/auth/signup\", credentials).then(res => {\n        const _res$data = res.data,\n              user = _res$data.user,\n              token = _res$data.token;\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        this.setState({\n          user,\n          token\n        });\n      }).catch(err => console.log(err.response.data.errMsg));\n    };\n\n    this.login = credentials => {\n      axios.post(\"/auth/login\", credentials).then(res => {\n        const _res$data2 = res.data,\n              user = _res$data2.user,\n              token = _res$data2.token;\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        this.setState({\n          user,\n          token\n        });\n      }).catch(err => console.log(err.response.data.errMsg));\n    };\n\n    this.state = {\n      user: JSON.parse(localStorage.getItem(\"user\")) || {},\n      token: localStorage.getItem(\"token\") || \"\"\n    };\n  }\n\n  render() {\n    return React.createElement(UserContext.Provider, {\n      value: _objectSpread({}, this.state, {\n        signup: this.signup,\n        login: this.login\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nexport default UserProvider;\nexport const withUser = C => props => React.createElement(UserContext.Consumer, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 64\n  },\n  __self: this\n}, value => React.createElement(C, Object.assign({}, value, props, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 65\n  },\n  __self: this\n})));","map":{"version":3,"sources":["C:\\Users\\Aspen Young\\OneDrive\\Documents\\Assignments\\personal projects\\personal project\\solo\\client\\src\\context\\userProvider.js"],"names":["React","Component","axios","UserContext","createContext","userAxios","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","UserProvider","constructor","signup","credentials","post","then","res","data","user","setItem","JSON","stringify","setState","catch","err","console","log","response","errMsg","login","state","parse","render","props","children","withUser","C","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\n\r\nconst UserContext = React.createContext()\r\nconst userAxios = axios.create()\r\n\r\n\r\nuserAxios.interceptors.request.use((config) => {\r\n    const token = localStorage.getItem(\"token\")\r\n    config.headers.Authorization = `Bearer ${token}`\r\n    return config\r\n})\r\n\r\n\r\nclass UserProvider extends Component {\r\n    constructor(){\r\n        super()\r\n        this.state = {\r\n            user: JSON.parse(localStorage.getItem(\"user\")) || {},\r\n            token: localStorage.getItem(\"token\") || \"\"\r\n        }\r\n    }\r\n\r\n    signup = (credentials) => {\r\n        axios.post(\"/auth/signup\", credentials)\r\n            .then(res => {\r\n                const { user, token } = res.data\r\n                localStorage.setItem(\"token\", token)\r\n                localStorage.setItem(\"user\", JSON.stringify(user))\r\n                this.setState({ user, token })\r\n            })\r\n            .catch(err => console.log(err.response.data.errMsg))\r\n    }\r\n\r\n    login = (credentials) => {\r\n        axios.post(\"/auth/login\", credentials)\r\n            .then(res => {\r\n                const { user, token } = res.data\r\n                localStorage.setItem(\"token\", token)\r\n                localStorage.setItem(\"user\", JSON.stringify(user))\r\n                this.setState({ user, token })\r\n            })\r\n            .catch(err => console.log(err.response.data.errMsg))\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <UserContext.Provider \r\n                value={{\r\n                    ...this.state,\r\n                    signup: this.signup,\r\n                    login: this.login\r\n                }}>\r\n                { this.props.children }\r\n            </UserContext.Provider>\r\n        )\r\n    }\r\n}\r\n\r\nexport default UserProvider\r\n\r\n\r\nexport const withUser = C => props => (\r\n    <UserContext.Consumer>\r\n        { value => <C {...value} {...props}/> }\r\n    </UserContext.Consumer>\r\n)"]},"metadata":{},"sourceType":"module"}